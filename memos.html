<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link type="text/css" rel="stylesheet" href="additional_files/bootstrap.simplify.min.css">
		<link type="text/css" rel="stylesheet" href="additional_files/sh_typical.min.css">
		<link type="text/css" rel="stylesheet" href="additional_files/pgmain.min.css">
		<title>OI 中转站 - 便笺</title>
		<script type="text/javascript" src="additional_files/basic.min.js"></script>
		<script type="text/javascript" src="additional_files/file.min.js"></script>
		<script type="text/javascript">
			// document loaded
			window.onload = function () {
				init();

				var dt = function() {dispTime.innerHTML = getTime();};
				dt(); setInterval(dt, 250);

				if(localStorage.getItem('marquee') === 'on'){
					intro.style.display = '';
					intro.start();
				}

				pageO = parseInt(parseSearch('page', '1'));
				LoadMemosTo(memTable.tBodies[0], memTotal);
			}
			// loading page turnings
			function pageDeals(){
				if(pageC <= 1){
					form2.style.display = 'none';
					return;
				}
				selPage.value = pageO;
				pagela1.value = pageO - 1;
				pagela2.value = pageO - 2;
				pagela3.value = pageO - 3;
				pagene1.value = pageO + 1;
				pagene2.value = pageO + 2;
				pagene3.value = pageO + 3;
				if(pageO <= 3) pagela3.style.display = 'none';
				if(pageO <= 2) pagela2.style.display = 'none';
				if(pageO <= 1){
					page1.style.display = 'none';
					pagela.style.display = 'none';
					pagela1.style.display = 'none';
				}
				selPage.max = pageC;
				if(pageC - 2 <= pageO) pagene3.style.display = 'none';
				if(pageC - 1 <= pageO) pagene2.style.display = 'none';
				if(pageC <= pageO){
					pageN.style.display = 'none';
					pagene.style.display = 'none';
					pagene1.style.display = 'none';
				}
			}
			// submit form2(page) in button
			function pgSubmit(p){
				form2.page.value = p;
				form2.submit();
			}
			// submit form2(page) in input
			function ptSubmit(){
				if(event.keyCode === 13 || event.which === 13){
					var pg0 = parseInt(form2.page.value);
					if(pg0 < 1 || pg0 > pageC){
						alert('scx: 你都输入的些什么呀，认真点！');
						return false;
					}
					form2.submit();
				}
			}
			// adjust marquee
			function MarqAdj(){
				if(intro.style.display == 'none'){
					intro.style.display = '';
					intro.start();
					localStorage.setItem('marquee', 'on');
				}else{
					intro.style.display = 'none';
					localStorage.setItem('marquee', 'off');
				}
			}
		</script>
	</head>
	<body class="main-body">
		<div class="title" style="height: 160px">
			<h2>OI 中转站 - 便笺</h2>
			<p id="dispTime">当前时间：2017-7-34 17:07:34</p>
		</div>
		<div class="dmarquee" style="height: 25px">
			<button class="button" id="btnMarquee" onclick="MarqAdj()" style="float: left">开启/关闭字幕</button>
			<div style="overflow: hidden">
				<marquee id="intro" scrollamount="1334" style="display: none;">注：(字幕修改，版本 1.2)</marquee>
			</div>
		</div>
		<div class="main">
			<div class="opacity" style="min-height: 1344px">
				<div class="cen big-button">
					<button id="btnRecord" onclick="location.href='index.html'">做题记录</button><button id="btnTools">小工具</button><button id="btnTemplate" onclick="location.href='templates.html'">模板</button><button id="btnMemo">便笺</button>
				</div>
				<fieldset>
					<legend>便笺</legend>
					<table class="main-table" id="memTable" style="width: 100%">
						<thead>
							<tr>
								<th style="width: 10%">便笺编号</th>
								<th style="width: 30%">便笺名称</th>
								<th style="width: 10%">链接</th>
								<th style="width: 20%">时间</th>
								<th style="width: 30%">备注</th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					<form id="form2"><p>页码：
						<input id="page1" value="&laquo;" type="button" onclick="pgSubmit(1)" /><input id="pagela" value="&lt;" type="button" onclick="pgSubmit(pageO - 1)" /><input id="pagela3" value="-2" type="button" onclick="pgSubmit(pageO - 3)"><input id="pagela2" value="-1" type="button" onclick="pgSubmit(pageO - 2)" /><input id="pagela1" value="0" type="button" onclick="pgSubmit(pageO - 1)" />
						<input id="selPage" name="page" value="1" type="number" min="1" max="170734" class="cen" style="width: 64px" onkeypress="return ptSubmit()" />
						<input id="pagene1" value="2" type="button" onclick="pgSubmit(pageO + 1)" /><input id="pagene2" value="3" type="button" onclick="pgSubmit(pageO + 2)" /><input id="pagene3" value="4" type="button" onclick="pgSubmit(pageO + 3)" /><input id="pagene" value="&gt;" type="button" onclick="pgSubmit(pageO + 1)" /><input id="pageN" value="&raquo;" type="button" onclick="pgSubmit(pageC)" />
					</p></form>
					<p id="memTotal" class="cen">请稍等，和 scx 喝喝茶就加载完毕啦！</p>
				</fieldset>
			</div>
		</div>
		<script type="text/javascript">
			if(console)
				console.log("scx: 这下可找到你了！哈哈哈~");
		</script>
	</body>
</html>
