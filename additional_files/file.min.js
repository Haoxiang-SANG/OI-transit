!function(a){"use strict";function b(){var b,c,d,e,f,h,j=0,k=0;for(Rows=[],g=i.split("\n"),b=0;b<g.length;++b)if(g[b]){if(d=g[b].replace(/[\f\n\r\v]/g,"").split("|"),5!==d.length)continue;++k,c=d[0],OJMatch(curLocation,c)&&(e=$("<tr />"),e.append(f=$("<td />").data("id",k-1)),e.append(f=$("<td />").html(pr2HTML(c))),h=$('<a href="records/'+escape(c)+'.html" target="_blank">链接</a>'),e.append(f=$("<td />").append(h)),e.append(f=$("<td />").html(d[1])),e.append(f=$("<td />").html(d[2])),e.append(f=$("<td />").html(d[3])),e.append(f=$("<td />").html(d[4])),Rows.push(e.get(0)),++j)}for(b=0;b<Rows.length;++b)f=$(Rows[b].cells[0]),f.html(k-f.data("id")).removeData();"nr"===curROrder?tableReverse():"n"!==curROrder&&sortTable(curROrder),$("#recTable").append(Rows.slice((curPage-1)*RECORDS_PER_PAGE,curPage*RECORDS_PER_PAGE)),$("#recTotal").html("scx: "+(j?(curLocation?"当前筛选下":"")+"共有 "+j+" 条记录":"怎么一道题都还没有啊，快点做题了！")),a.totPage=Math.ceil(j/RECORDS_PER_PAGE)}function c(){var a;tmpArr=i.split("\n"),titleArr=[];for(a in tmpArr)tmpArr[a]=tmpArr[a]&&tmpArr[a].replace(/[\f\n\r\v]/g,"")}function d(){if(k>=tmpArr.length)return $("#templates").append(l),l=[];var a=tmpArr[k];return a?(xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(j=xhr.responseXML,j&&e(),++k,d()):alert(m))},a="templates/"+a+".xml",xhr.open("GET",a,!0),xhr.send(null),void 0):($("#templates").append(l),l=[])}function e(){var a;titleArr[k]=$("title",j).text(),l.push($("<h3 />").attr("id",tmpArr[k]).html(titleArr[k]+" [#"+tmpArr[k]+"]:").get(0)),a=$("pre",j).prop("outerHTML"),l.push($("<div />").html(a).get(0))}function f(){var b,c,d,e,f,g,j,k=0;for(Rows=[],h=i.split("\n"),b=0;b<h.length;++b)if(h[b]){if(e=h[b].replace(/[\f\n\r\v]/g,"").split("|"),4!==e.length)continue;d=e[0],f=$("<tr />"),f.append(g=$("<td />").data("id",b)),f.append(g=$("<td />").html(e[0])),f.append(g=$("<td />")),f.append(g=$("<td />").html(e[1])),f.append(g=$("<td />").html(e[2])),f.data("priority",parseInt(e[3])),Rows.push(f.get(0)),++k}for(b=0;b<Rows.length;++b)g=$(Rows[b].cells[0]),g.html(c=k-g.data("id")).removeData(),g=$(Rows[b].cells[2]),j=$('<a href="memos/'+c+'.html" target="_blank">链接</a>'),g.append(j);for(Rows.sort(function(a,b){return $(b).data("priority")-$(a).data("priority")}),b=0;b<Rows.length;++b)$(Rows[b]).removeData();$("#memTable").append(Rows.slice((curPage-1)*MEMOS_PER_PAGE,curPage*MEMOS_PER_PAGE)),$("#memTotal").html("scx: 共 "+k+" 份便笺"),a.totPage=Math.ceil(k/RECORDS_PER_PAGE)}var g,h,i,j,k,l;const m="今天运气不怎么好，和 scx 喝口茶再试试吧";a.LoadRecords=function(){i="",xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(i=xhr.responseText,b(),pageDeals()):alert(m))},xhr.open("GET","records/tot.cfg",!0),xhr.send(null)},a.LoadTemplates=function(){i="",xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(i=xhr.responseText,c(),k=0,l=[],d()):alert(m))},xhr.open("GET","templates/tot.cfg",!0),xhr.send(null)},window.LoadMemos=function(){i="",xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(i=xhr.responseText,f()):alert(m))},xhr.open("GET","memos/tot.cfg",!0),xhr.send(null)}}(window?window:this);