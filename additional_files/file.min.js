!function(a){"use strict";function b(a){var b,c,d,f,g=this.id;for(titleArr[g]=$("title",a).text(),d=$("<h3 />").attr("id",tmpArr[g]).html(titleArr[g]+" [#"+tmpArr[g]+"]:"),c=$("pre",a).prop("outerHTML"),f=$("<div />").html(c).attr("data-id",g),b=g-1;b>=0&&!e[b];--b);$("#templates>div"+(~b?"[data-id="+b+"]":".cen")).after(f).after(d),e[g]=!0}var c,d,e;a.parseRecords=function(b){var d,e,f,g,h,i,j,k=0,l=0;for(Rows=[],c=b.split("\n"),d=0;d<c.length;++d)if(c[d]){if(f=c[d].replace(/[\f\n\r\v]/g,"").split("|"),5!==f.length)continue;++l,g=OJMatch(curLocation,e=f[0]),g&&(h=$("<tr />"),h.append(i=$("<td />").data("id",l-1)),h.append(i=$("<td />").html(g)),j=$('<a href="records/'+escape(e)+'.html" target="_blank">链接</a>'),h.append(i=$("<td />").append(j)),h.append(i=$("<td />").html(f[1])),h.append(i=$("<td />").html(f[2])),h.append(i=$("<td />").html(f[3])),h.append(i=$("<td />").html(f[4])),Rows.push(h.get(0)),++k)}for(d=0;d<Rows.length;++d)i=$(Rows[d].cells[0]),i.html(l-i.data("id")).removeData();"nr"===curROrder?tableReverse():"n"!==curROrder&&sortTable(curROrder),$("#recTable").append(Rows.slice((curPage-1)*RECORDS_PER_PAGE,curPage*RECORDS_PER_PAGE)),$("#recTotal").html("统计："+(k?(curLocation?"当前筛选下":"")+"共有 "+k+" 条记录":"怎么一道题都还没有啊，快点做题了！")),a.totPage=Math.ceil(k/RECORDS_PER_PAGE),pagination()},a.getTemplates=function(a){tmpArr=a.split("\n"),titleArr=[],e=[];var c,d;for(c in tmpArr){if(d=tmpArr[c]=tmpArr[c].replace(/[\f\n\r\v]/g,""),!d.length)return;$.ajax("templates/"+d+".xml",{type:"GET",dataType:"xml",id:parseInt(c),success:b})}},a.parseMemos=function(b){var c,e,f,g,h,i,j,k=0;for(Rows=[],d=b.split("\n"),c=0;c<d.length;++c)if(d[c]){if(g=d[c].replace(/[\f\n\r\v]/g,"").split("|"),4!==g.length)continue;f=g[0],h=$("<tr />"),h.append(i=$("<td />").data("id",c)),h.append(i=$("<td />").html(g[0])),h.append(i=$("<td />")),h.append(i=$("<td />").html(g[1])),h.append(i=$("<td />").html(g[2])),h.data("priority",parseInt(g[3])),Rows.push(h.get(0)),++k}for(c=0;c<Rows.length;++c)i=$(Rows[c].cells[0]),i.html(e=k-i.data("id")).removeData(),i=$(Rows[c].cells[2]),j=$('<a href="memos/'+e+'.html" target="_blank">链接</a>'),i.append(j);for(Rows.sort(function(a,b){return $(b).data("priority")-$(a).data("priority")||+b.cells[0].innerText-+a.cells[0].innerText}),c=0;c<Rows.length;++c)$(Rows[c]).removeData();$("#memTable").append(Rows.slice((curPage-1)*MEMOS_PER_PAGE,curPage*MEMOS_PER_PAGE)),$("#memTotal").html("统计: 共 "+k+" 份便笺"),a.totPage=Math.ceil(k/RECORDS_PER_PAGE),pagination()},a.parseRanklist=function(a){var b,c,d,e,f;if("OK"===a.status){a=a.result,Rows=[];for(b in a)d=$("<tr />"),c=a[b].rating,f=$('<a class="user '+(c>=3e3?"legendary":c>=2400?"red":c>=2100?"orange":c>=1900?"violet":c>=1600?"blue":c>=1400?"cyan":c>=1200?"green":"gray")+'" href="http://codeforces.com/profile/'+a[b].handle+'" target="_blank">'+a[b].handle+"</a>"),d.append(e=$("<td />").append(f)),d.append(e=$("<td />").html(a[b].firstName)),d.append(e=$("<td />").html(a[b].lastName)),d.append(e=$("<td />").html(a[b].rating)),d.append(e=$("<td />").html(a[b].maxRating)),c=new Date(1e3*a[b].lastOnlineTimeSeconds),d.append(e=$("<td />").html(dateFormat(c))),f=(c=getFL(a[b].handle))?$('<a href="'+c+'" target="_blank">'+c+"</a>"):null,d.append(e=$("<td />").append(f)),Rows.push(d.get(0));$("#rankTable").append(Rows)}}}(window?window:this);