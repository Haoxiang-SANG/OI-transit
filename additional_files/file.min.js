!function(a,b){"use strict";function c(){var b,c,d,e,f,g,i,k=0,l=0;for(Rows=[],h=j.split("\n"),b=0;b<h.length;++b)if(h[b]){if(d=h[b].replace(/[\f\n\r\v]/g,"").split("|"),5!==d.length)continue;++l,e=OJMatch(curLocation,c=d[0]),e&&(f=$("<tr />"),f.append(g=$("<td />").data("id",l-1)),f.append(g=$("<td />").html(e)),i=$('<a href="records/'+escape(c)+'.html" target="_blank">链接</a>'),f.append(g=$("<td />").append(i)),f.append(g=$("<td />").html(d[1])),f.append(g=$("<td />").html(d[2])),f.append(g=$("<td />").html(d[3])),f.append(g=$("<td />").html(d[4])),Rows.push(f.get(0)),++k)}for(b=0;b<Rows.length;++b)g=$(Rows[b].cells[0]),g.html(l-g.data("id")).removeData();"nr"===curROrder?tableReverse():"n"!==curROrder&&sortTable(curROrder),$("#recTable").append(Rows.slice((curPage-1)*RECORDS_PER_PAGE,curPage*RECORDS_PER_PAGE)),$("#recTotal").html("scx: "+(k?(curLocation?"当前筛选下":"")+"共有 "+k+" 条记录":"怎么一道题都还没有啊，快点做题了！")),a.totPage=Math.ceil(k/RECORDS_PER_PAGE)}function d(){var a;tmpArr=j.split("\n"),titleArr=[];for(a in tmpArr)tmpArr[a]=tmpArr[a]&&tmpArr[a].replace(/[\f\n\r\v]/g,"")}function e(){if(l>=tmpArr.length)return $("#templates").append(m),m=[];var a=tmpArr[l];return a?(xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(k=xhr.responseXML,k&&f(),++l,e()):alert(n))},a="templates/"+a+".xml",xhr.open("GET",a,!0),xhr.send(null),b):($("#templates").append(m),m=[])}function f(){var a;titleArr[l]=$("title",k).text(),m.push($("<h3 />").attr("id",tmpArr[l]).html(titleArr[l]+" [#"+tmpArr[l]+"]:").get(0)),a=$("pre",k).prop("outerHTML"),m.push($("<div />").html(a).get(0))}function g(){var b,c,d,e,f,g,h,k=0;for(Rows=[],i=j.split("\n"),b=0;b<i.length;++b)if(i[b]){if(e=i[b].replace(/[\f\n\r\v]/g,"").split("|"),4!==e.length)continue;d=e[0],f=$("<tr />"),f.append(g=$("<td />").data("id",b)),f.append(g=$("<td />").html(e[0])),f.append(g=$("<td />")),f.append(g=$("<td />").html(e[1])),f.append(g=$("<td />").html(e[2])),f.data("priority",parseInt(e[3])),Rows.push(f.get(0)),++k}for(b=0;b<Rows.length;++b)g=$(Rows[b].cells[0]),g.html(c=k-g.data("id")).removeData(),g=$(Rows[b].cells[2]),h=$('<a href="memos/'+c+'.html" target="_blank">链接</a>'),g.append(h);for(Rows.sort(function(a,b){return $(b).data("priority")-$(a).data("priority")}),b=0;b<Rows.length;++b)$(Rows[b]).removeData();$("#memTable").append(Rows.slice((curPage-1)*MEMOS_PER_PAGE,curPage*MEMOS_PER_PAGE)),$("#memTotal").html("scx: 共 "+k+" 份便笺"),a.totPage=Math.ceil(k/RECORDS_PER_PAGE)}var h,i,j,k,l,m;const n="今天运气不怎么好，和 scx 喝口茶再试试吧";a.LoadRecords=function(){j="",xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(j=xhr.responseText,c(),pageDeals()):alert(n))},xhr.open("GET","records/tot.cfg",!0),xhr.send(null)},a.LoadTemplates=function(){j="",xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(j=xhr.responseText,d(),l=0,m=[],e()):alert(n))},xhr.open("GET","templates/tot.cfg",!0),xhr.send(null)},window.LoadMemos=function(){j="",xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status||0===xhr.status?(j=xhr.responseText,g()):alert(n))},xhr.open("GET","memos/tot.cfg",!0),xhr.send(null)}}(window?window:this);